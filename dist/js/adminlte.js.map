{"version":3,"file":"adminlte.js","sources":["../../build/js/CardRefresh.js"],"sourcesContent":["/**\n * --------------------------------------------\n * AdminLTE CardRefresh.js\n * License MIT\n * --------------------------------------------\n */\n\nimport $ from 'jquery'\n\n/**\n * Constants\n * ====================================================\n */\n\nconst NAME = 'CardRefresh'\nconst DATA_KEY = 'lte.cardrefresh'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst JQUERY_NO_CONFLICT = $.fn[NAME]\n\nconst EVENT_LOADED = `loaded${EVENT_KEY}`\nconst EVENT_OVERLAY_ADDED = `overlay.added${EVENT_KEY}`\nconst EVENT_OVERLAY_REMOVED = `overlay.removed${EVENT_KEY}`\n\nconst CLASS_NAME_CARD = 'card'\n\nconst SELECTOR_CARD = `.${CLASS_NAME_CARD}`\nconst SELECTOR_DATA_REFRESH = '[data-card-widget=\"card-refresh\"]'\n\nconst Default = {\n  source: '',\n  sourceSelector: '',\n  params: {},\n  trigger: SELECTOR_DATA_REFRESH,\n  content: '.card-body',\n  loadInContent: true,\n  loadOnInit: true,\n  loadErrorTemplate: true,\n  responseType: '',\n  overlayTemplate: '<div class=\"overlay\"><i class=\"fas fa-2x fa-sync-alt fa-spin\"></i></div>',\n  errorTemplate: '<span class=\"text-danger\"></span>',\n  onLoadStart() {},\n  onLoadDone(response) {\n    return response\n  },\n  onLoadFail(_jqXHR, _textStatus, _errorThrown) {}\n}\n\nclass CardRefresh {\n  constructor(element, settings) {\n    this._element = element\n    this._parent = element.parents(SELECTOR_CARD).first()\n    this._settings = $.extend({}, Default, settings)\n    this._overlay = $(this._settings.overlayTemplate)\n\n    if (element.hasClass(CLASS_NAME_CARD)) {\n      this._parent = element\n    }\n\n    if (this._settings.source === '') {\n      throw new Error('Source url was not defined. Please specify a url in your CardRefresh source option.')\n    }\n  }\n\n  load() {\n    this._addOverlay()\n    this._settings.onLoadStart.call($(this))\n\n    $.get(this._settings.source, this._settings.params, response => {\n      if (this._settings.loadInContent) {\n        if (this._settings.sourceSelector !== '') {\n          response = $(response).find(this._settings.sourceSelector).html()\n        }\n\n        this._parent.find(this._settings.content).html(response)\n      }\n\n      this._settings.onLoadDone.call($(this), response)\n      this._removeOverlay()\n    }, this._settings.responseType !== '' && this._settings.responseType)\n    .fail((jqXHR, textStatus, errorThrown) => {\n      this._removeOverlay()\n\n      if (this._settings.loadErrorTemplate) {\n        const msg = $(this._settings.errorTemplate).text(errorThrown)\n        this._parent.find(this._settings.content).empty().append(msg)\n      }\n\n      this._settings.onLoadFail.call($(this), jqXHR, textStatus, errorThrown)\n    })\n\n    $(this._element).trigger($.Event(EVENT_LOADED))\n  }\n\n  _addOverlay() {\n    this._parent.append(this._overlay)\n    $(this._element).trigger($.Event(EVENT_OVERLAY_ADDED))\n  }\n\n  _removeOverlay() {\n    this._parent.find(this._overlay).remove()\n    $(this._element).trigger($.Event(EVENT_OVERLAY_REMOVED))\n  }\n\n  // Private\n\n  _init() {\n    $(this).find(this._settings.trigger).on('click', () => {\n      this.load()\n    })\n\n    if (this._settings.loadOnInit) {\n      this.load()\n    }\n  }\n\n  // Static\n\n  static _jQueryInterface(config) {\n    let data = $(this).data(DATA_KEY)\n    const _options = $.extend({}, Default, $(this).data())\n\n    if (!data) {\n      data = new CardRefresh($(this), _options)\n      $(this).data(DATA_KEY, typeof config === 'string' ? data : config)\n    }\n\n    if (typeof config === 'string' && /load/.test(config)) {\n      data[config]()\n    } else {\n      data._init($(this))\n    }\n  }\n}\n\n/**\n * Data API\n * ====================================================\n */\n\n$(document).on('click', SELECTOR_DATA_REFRESH, function (event) {\n  if (event) {\n    event.preventDefault()\n  }\n\n  CardRefresh._jQueryInterface.call($(this), 'load')\n})\n\n$(() => {\n  $(SELECTOR_DATA_REFRESH).each(function () {\n    CardRefresh._jQueryInterface.call($(this))\n  })\n})\n\n/**\n * jQuery API\n * ====================================================\n */\n\n$.fn[NAME] = CardRefresh._jQueryInterface\n$.fn[NAME].Constructor = CardRefresh\n$.fn[NAME].noConflict = function () {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return CardRefresh._jQueryInterface\n}\n\nexport default CardRefresh\n"],"names":["NAME","DATA_KEY","EVENT_KEY","JQUERY_NO_CONFLICT","$","fn","EVENT_LOADED","EVENT_OVERLAY_ADDED","EVENT_OVERLAY_REMOVED","CLASS_NAME_CARD","SELECTOR_CARD","SELECTOR_DATA_REFRESH","Default","source","sourceSelector","params","trigger","content","loadInContent","loadOnInit","loadErrorTemplate","responseType","overlayTemplate","errorTemplate","onLoadStart","onLoadDone","response","onLoadFail","_jqXHR","_textStatus","_errorThrown","CardRefresh","element","settings","_element","_parent","parents","first","_settings","extend","_overlay","hasClass","Error","load","_addOverlay","call","get","find","html","_removeOverlay","fail","jqXHR","textStatus","errorThrown","msg","text","empty","append","Event","remove","_init","on","_jQueryInterface","config","data","_options","test","document","event","preventDefault","each","Constructor","noConflict"],"mappings":";;;;;;;;;;;;;;;EAAA;EACA;EACA;EACA;EACA;EACA;EAIA;EACA;EACA;EACA;;EAEA,IAAMA,IAAI,GAAG,aAAb;EACA,IAAMC,QAAQ,GAAG,iBAAjB;EACA,IAAMC,SAAS,SAAOD,QAAtB;EACA,IAAME,kBAAkB,GAAGC,qBAAC,CAACC,EAAF,CAAKL,IAAL,CAA3B;EAEA,IAAMM,YAAY,cAAYJ,SAA9B;EACA,IAAMK,mBAAmB,qBAAmBL,SAA5C;EACA,IAAMM,qBAAqB,uBAAqBN,SAAhD;EAEA,IAAMO,eAAe,GAAG,MAAxB;EAEA,IAAMC,aAAa,SAAOD,eAA1B;EACA,IAAME,qBAAqB,GAAG,mCAA9B;EAEA,IAAMC,OAAO,GAAG;EACdC,EAAAA,MAAM,EAAE,EADM;EAEdC,EAAAA,cAAc,EAAE,EAFF;EAGdC,EAAAA,MAAM,EAAE,EAHM;EAIdC,EAAAA,OAAO,EAAEL,qBAJK;EAKdM,EAAAA,OAAO,EAAE,YALK;EAMdC,EAAAA,aAAa,EAAE,IAND;EAOdC,EAAAA,UAAU,EAAE,IAPE;EAQdC,EAAAA,iBAAiB,EAAE,IARL;EASdC,EAAAA,YAAY,EAAE,EATA;EAUdC,EAAAA,eAAe,EAAE,0EAVH;EAWdC,EAAAA,aAAa,EAAE,mCAXD;EAYdC,EAAAA,WAZc,yBAYA,EAZA;EAadC,EAAAA,UAbc,sBAaHC,QAbG,EAaO;EACnB,WAAOA,QAAP;EACD,GAfa;EAgBdC,EAAAA,UAhBc,sBAgBHC,MAhBG,EAgBKC,WAhBL,EAgBkBC,YAhBlB,EAgBgC;EAhBhC,CAAhB;;MAmBMC;EACJ,uBAAYC,OAAZ,EAAqBC,QAArB,EAA+B;EAC7B,SAAKC,QAAL,GAAgBF,OAAhB;EACA,SAAKG,OAAL,GAAeH,OAAO,CAACI,OAAR,CAAgB1B,aAAhB,EAA+B2B,KAA/B,EAAf;EACA,SAAKC,SAAL,GAAiBlC,qBAAC,CAACmC,MAAF,CAAS,EAAT,EAAa3B,OAAb,EAAsBqB,QAAtB,CAAjB;EACA,SAAKO,QAAL,GAAgBpC,qBAAC,CAAC,KAAKkC,SAAL,CAAehB,eAAhB,CAAjB;;EAEA,QAAIU,OAAO,CAACS,QAAR,CAAiBhC,eAAjB,CAAJ,EAAuC;EACrC,WAAK0B,OAAL,GAAeH,OAAf;EACD;;EAED,QAAI,KAAKM,SAAL,CAAezB,MAAf,KAA0B,EAA9B,EAAkC;EAChC,YAAM,IAAI6B,KAAJ,CAAU,qFAAV,CAAN;EACD;EACF;;;;WAEDC,OAAA,gBAAO;EAAA;;EACL,SAAKC,WAAL;;EACA,SAAKN,SAAL,CAAed,WAAf,CAA2BqB,IAA3B,CAAgCzC,qBAAC,CAAC,IAAD,CAAjC;;EAEAA,IAAAA,qBAAC,CAAC0C,GAAF,CAAM,KAAKR,SAAL,CAAezB,MAArB,EAA6B,KAAKyB,SAAL,CAAevB,MAA5C,EAAoD,UAAAW,QAAQ,EAAI;EAC9D,UAAI,KAAI,CAACY,SAAL,CAAepB,aAAnB,EAAkC;EAChC,YAAI,KAAI,CAACoB,SAAL,CAAexB,cAAf,KAAkC,EAAtC,EAA0C;EACxCY,UAAAA,QAAQ,GAAGtB,qBAAC,CAACsB,QAAD,CAAD,CAAYqB,IAAZ,CAAiB,KAAI,CAACT,SAAL,CAAexB,cAAhC,EAAgDkC,IAAhD,EAAX;EACD;;EAED,QAAA,KAAI,CAACb,OAAL,CAAaY,IAAb,CAAkB,KAAI,CAACT,SAAL,CAAerB,OAAjC,EAA0C+B,IAA1C,CAA+CtB,QAA/C;EACD;;EAED,MAAA,KAAI,CAACY,SAAL,CAAeb,UAAf,CAA0BoB,IAA1B,CAA+BzC,qBAAC,CAAC,KAAD,CAAhC,EAAwCsB,QAAxC;;EACA,MAAA,KAAI,CAACuB,cAAL;EACD,KAXD,EAWG,KAAKX,SAAL,CAAejB,YAAf,KAAgC,EAAhC,IAAsC,KAAKiB,SAAL,CAAejB,YAXxD,EAYC6B,IAZD,CAYM,UAACC,KAAD,EAAQC,UAAR,EAAoBC,WAApB,EAAoC;EACxC,MAAA,KAAI,CAACJ,cAAL;;EAEA,UAAI,KAAI,CAACX,SAAL,CAAelB,iBAAnB,EAAsC;EACpC,YAAMkC,GAAG,GAAGlD,qBAAC,CAAC,KAAI,CAACkC,SAAL,CAAef,aAAhB,CAAD,CAAgCgC,IAAhC,CAAqCF,WAArC,CAAZ;;EACA,QAAA,KAAI,CAAClB,OAAL,CAAaY,IAAb,CAAkB,KAAI,CAACT,SAAL,CAAerB,OAAjC,EAA0CuC,KAA1C,GAAkDC,MAAlD,CAAyDH,GAAzD;EACD;;EAED,MAAA,KAAI,CAAChB,SAAL,CAAeX,UAAf,CAA0BkB,IAA1B,CAA+BzC,qBAAC,CAAC,KAAD,CAAhC,EAAwC+C,KAAxC,EAA+CC,UAA/C,EAA2DC,WAA3D;EACD,KArBD;EAuBAjD,IAAAA,qBAAC,CAAC,KAAK8B,QAAN,CAAD,CAAiBlB,OAAjB,CAAyBZ,qBAAC,CAACsD,KAAF,CAAQpD,YAAR,CAAzB;EACD;;WAEDsC,cAAA,uBAAc;EACZ,SAAKT,OAAL,CAAasB,MAAb,CAAoB,KAAKjB,QAAzB;;EACApC,IAAAA,qBAAC,CAAC,KAAK8B,QAAN,CAAD,CAAiBlB,OAAjB,CAAyBZ,qBAAC,CAACsD,KAAF,CAAQnD,mBAAR,CAAzB;EACD;;WAED0C,iBAAA,0BAAiB;EACf,SAAKd,OAAL,CAAaY,IAAb,CAAkB,KAAKP,QAAvB,EAAiCmB,MAAjC;;EACAvD,IAAAA,qBAAC,CAAC,KAAK8B,QAAN,CAAD,CAAiBlB,OAAjB,CAAyBZ,qBAAC,CAACsD,KAAF,CAAQlD,qBAAR,CAAzB;EACD;;;WAIDoD,QAAA,iBAAQ;EAAA;;EACNxD,IAAAA,qBAAC,CAAC,IAAD,CAAD,CAAQ2C,IAAR,CAAa,KAAKT,SAAL,CAAetB,OAA5B,EAAqC6C,EAArC,CAAwC,OAAxC,EAAiD,YAAM;EACrD,MAAA,MAAI,CAAClB,IAAL;EACD,KAFD;;EAIA,QAAI,KAAKL,SAAL,CAAenB,UAAnB,EAA+B;EAC7B,WAAKwB,IAAL;EACD;EACF;;;gBAIMmB,mBAAP,0BAAwBC,MAAxB,EAAgC;EAC9B,QAAIC,IAAI,GAAG5D,qBAAC,CAAC,IAAD,CAAD,CAAQ4D,IAAR,CAAa/D,QAAb,CAAX;;EACA,QAAMgE,QAAQ,GAAG7D,qBAAC,CAACmC,MAAF,CAAS,EAAT,EAAa3B,OAAb,EAAsBR,qBAAC,CAAC,IAAD,CAAD,CAAQ4D,IAAR,EAAtB,CAAjB;;EAEA,QAAI,CAACA,IAAL,EAAW;EACTA,MAAAA,IAAI,GAAG,IAAIjC,WAAJ,CAAgB3B,qBAAC,CAAC,IAAD,CAAjB,EAAyB6D,QAAzB,CAAP;EACA7D,MAAAA,qBAAC,CAAC,IAAD,CAAD,CAAQ4D,IAAR,CAAa/D,QAAb,EAAuB,OAAO8D,MAAP,KAAkB,QAAlB,GAA6BC,IAA7B,GAAoCD,MAA3D;EACD;;EAED,QAAI,OAAOA,MAAP,KAAkB,QAAlB,IAA8B,OAAOG,IAAP,CAAYH,MAAZ,CAAlC,EAAuD;EACrDC,MAAAA,IAAI,CAACD,MAAD,CAAJ;EACD,KAFD,MAEO;EACLC,MAAAA,IAAI,CAACJ,KAAL,CAAWxD,qBAAC,CAAC,IAAD,CAAZ;EACD;EACF;;;;EAGH;EACA;EACA;EACA;;;AAEAA,uBAAC,CAAC+D,QAAD,CAAD,CAAYN,EAAZ,CAAe,OAAf,EAAwBlD,qBAAxB,EAA+C,UAAUyD,KAAV,EAAiB;EAC9D,MAAIA,KAAJ,EAAW;EACTA,IAAAA,KAAK,CAACC,cAAN;EACD;;EAEDtC,EAAAA,WAAW,CAAC+B,gBAAZ,CAA6BjB,IAA7B,CAAkCzC,qBAAC,CAAC,IAAD,CAAnC,EAA2C,MAA3C;EACD,CAND;AAQAA,uBAAC,CAAC,YAAM;EACNA,EAAAA,qBAAC,CAACO,qBAAD,CAAD,CAAyB2D,IAAzB,CAA8B,YAAY;EACxCvC,IAAAA,WAAW,CAAC+B,gBAAZ,CAA6BjB,IAA7B,CAAkCzC,qBAAC,CAAC,IAAD,CAAnC;EACD,GAFD;EAGD,CAJA,CAAD;EAMA;EACA;EACA;EACA;;AAEAA,uBAAC,CAACC,EAAF,CAAKL,IAAL,IAAa+B,WAAW,CAAC+B,gBAAzB;AACA1D,uBAAC,CAACC,EAAF,CAAKL,IAAL,EAAWuE,WAAX,GAAyBxC,WAAzB;;AACA3B,uBAAC,CAACC,EAAF,CAAKL,IAAL,EAAWwE,UAAX,GAAwB,YAAY;EAClCpE,EAAAA,qBAAC,CAACC,EAAF,CAAKL,IAAL,IAAaG,kBAAb;EACA,SAAO4B,WAAW,CAAC+B,gBAAnB;EACD,CAHD;;;;;;;;;;"}